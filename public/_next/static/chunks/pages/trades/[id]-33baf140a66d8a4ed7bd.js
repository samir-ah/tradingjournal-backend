(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{5260:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(266),a=r(809),s=r.n(a),i=r(2942),c=r(7294),o=r(5675),l=r(9836),u="https://localhost:8000/",d=r(7561),x=r(8129),m=r(244),p=r(5893),f=function(e){var t=e.images,r=e.edit,a=void 0===r||r,f=(0,m.x)(),h=(f.isLoading,f.axiosRequest),g=(0,c.useContext)(x.t),y=(0,c.useState)(t),b=y[0],j=y[1];function v(e){return w.apply(this,arguments)}function w(){return(w=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(t);case 3:e.sent,j((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(e){return k.apply(this,arguments)}function k(){return(k=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/api/trade_images/".concat(t),{method:"delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"w-full max-w-sm md:max-w-lg ",children:[a&&(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Captures"}),(0,p.jsx)("div",{className:"grid grid-rows-1 grid-flow-col gap-3 mt-1  overflow-x-auto w-full ",children:(0,p.jsx)(l.Z,{children:b.map((function(e){return(0,p.jsxs)("div",{className:" w-52  overflow-hidden ",children:[(0,p.jsx)(o.default,{loader:d.tQ,src:u+e.fileUrl,alt:"trade screenshot",width:200,height:140,layout:"responsive","data-fancybox":"gallery","data-src":u+e.fileUrl,className:"rounded-md cursor-pointer"}),a&&(0,p.jsx)("div",{className:"flex justify-center",children:(0,p.jsx)("span",{className:"mx-auto h-10 w-10 text-gray-400 hover:text-red-500 ",onClick:function(){g.showPopupHandler({message:"Etes-vous s\xfbr de vouloir supprimer cette image ? la supression est d\xe9finitive",onConfirmTrue:v.bind(null,e.id),title:null})},children:(0,p.jsx)(i.oOx,{})})})]},e.id)}))})})]})})}},9836:function(e,t,r){"use strict";var n=r(7294),a=r(2689),s=r(5893);t.Z=function(e){var t=e.delegate||"[data-fancybox]";return(0,n.useEffect)((function(){var r=e.options||{};return a.KR.bind(t,r),function(){a.KR.destroy()}}),[t,e.options]),(0,s.jsx)(s.Fragment,{children:e.children})}},7130:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(2809),a=r(7294),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var i=function(e){var t=e.animate,r=e.backgroundColor,n=e.backgroundOpacity,i=e.baseUrl,c=e.children,o=e.foregroundColor,l=e.foregroundOpacity,u=e.gradientRatio,d=e.uniqueKey,x=e.interval,m=e.rtl,p=e.speed,f=e.style,h=e.title,g=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),y=d||Math.random().toString(36).substring(6),b=y+"-diff",j=y+"-animated-diff",v=y+"-aria",w=m?{transform:"scaleX(-1)"}:null,O="0; "+x+"; 1",k=p+"s";return(0,a.createElement)("svg",s({"aria-labelledby":v,role:"img",style:s(s({},f),w)},g),h?(0,a.createElement)("title",{id:v},h):null,(0,a.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+b+")",style:{fill:"url("+i+"#"+j+")"}}),(0,a.createElement)("defs",null,(0,a.createElement)("clipPath",{id:b},c),(0,a.createElement)("linearGradient",{id:j},(0,a.createElement)("stop",{offset:"0%",stopColor:r,stopOpacity:n},t&&(0,a.createElement)("animate",{attributeName:"offset",values:-u+"; "+-u+"; 1",keyTimes:O,dur:k,repeatCount:"indefinite"})),(0,a.createElement)("stop",{offset:"50%",stopColor:o,stopOpacity:l},t&&(0,a.createElement)("animate",{attributeName:"offset",values:-u/2+"; "+-u/2+"; "+(1+u/2),keyTimes:O,dur:k,repeatCount:"indefinite"})),(0,a.createElement)("stop",{offset:"100%",stopColor:r,stopOpacity:n},t&&(0,a.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+u),keyTimes:O,dur:k,repeatCount:"indefinite"})))))};i.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var c=function(e){return e.children?(0,a.createElement)(i,s({},e)):(0,a.createElement)(o,s({},e))},o=function(e){return(0,a.createElement)(c,s({viewBox:"0 0 476 124"},e),(0,a.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,a.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},l=c,u=r(5336),d=r(5893);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=(0,a.useContext)(u.Ni);return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(l,m(m({width:700,height:270,viewBox:"0 0 700 270",style:{width:"100%"},backgroundColor:t.theme===u.Q2.LIGHT?"#e6e6e6":"#3b3b3b",foregroundColor:t.theme===u.Q2.LIGHT?"#b0b0b0":"#828282"},e),{},{children:[(0,d.jsx)("rect",{x:"537",y:"9",rx:"2",ry:"2",width:"140",height:"10"}),(0,d.jsx)("rect",{x:"14",y:"30",rx:"2",ry:"2",width:"667",height:"11"}),(0,d.jsx)("rect",{x:"12",y:"58",rx:"2",ry:"2",width:"211",height:"211"}),(0,d.jsx)("rect",{x:"240",y:"57",rx:"2",ry:"2",width:"211",height:"211"}),(0,d.jsx)("rect",{x:"467",y:"56",rx:"2",ry:"2",width:"211",height:"211"}),(0,d.jsx)("rect",{x:"12",y:"283",rx:"2",ry:"2",width:"211",height:"211"}),(0,d.jsx)("rect",{x:"240",y:"281",rx:"2",ry:"2",width:"211",height:"211"}),(0,d.jsx)("rect",{x:"468",y:"279",rx:"2",ry:"2",width:"211",height:"211"}),(0,d.jsx)("circle",{cx:"286",cy:"536",r:"12"}),(0,d.jsx)("circle",{cx:"319",cy:"535",r:"12"}),(0,d.jsx)("circle",{cx:"353",cy:"535",r:"12"}),(0,d.jsx)("rect",{x:"378",y:"524",rx:"0",ry:"0",width:"52",height:"24"}),(0,d.jsx)("rect",{x:"210",y:"523",rx:"0",ry:"0",width:"52",height:"24"}),(0,d.jsx)("circle",{cx:"210",cy:"535",r:"12"}),(0,d.jsx)("circle",{cx:"428",cy:"536",r:"12"})]}))})}},244:function(e,t,r){"use strict";r.d(t,{x:function(){return m}});var n=r(2809),a=r(266),s=r(809),i=r.n(s),c=r(7294),o=r(9669),l=r.n(o),u=r(9742);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(){var e=(0,c.useState)(!1),t=e[0],r=e[1],n=(0,c.useContext)(u.Vo),s=(0,c.useRef)([]),o=(0,c.useCallback)(function(){var e=(0,a.Z)(i().mark((function e(t){var a,c,o,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},r(!0),c=new AbortController,s.current.push(c),e.prev=4,e.next=7,l()(t,x(x({},a),{},{headers:x(x({},a.headers),{},{Accept:"application/ld+json"},n.token&&{Authorization:"Bearer ".concat(n.token)}),signal:c.signal,baseURL:"https://localhost:8000"}));case 7:return o=e.sent,s.current=s.current.filter((function(e){return e!==c})),r(!1),e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(4),r(!1),e.t0.response;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[n.token]);return(0,c.useEffect)((function(){return function(){s.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:t,axiosRequest:o}}},5149:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(266),a=r(809),s=r.n(a),i=r(1163),c=r(7294),o=r(2942),l=r(9742),u=r(8129),d=r(244),x=r(5260),m=r(5893),p=function(e){var t=e.trade,r=(0,c.useContext)(l.Vo),a=(0,i.useRouter)(),p=(0,d.x)(),f=(p.isLoading,p.axiosRequest),h=(0,c.useContext)(u.t),g=r.user.id===parseInt(t.author.id);function y(e){return b.apply(this,arguments)}function b(){return(b=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t);case 3:e.sent,a.replace("/trades/my-trades"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function j(e){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/api/trades/".concat(t),{method:"delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden rounded-lg mx-1",children:[(0,m.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("div",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-gray-50",children:t.tradeInstrument.name}),(0,m.jsxs)("div",{className:"flex text-gray-800 dark:text-gray-100 mb-3 font-bold justify-start",children:[(0,m.jsx)("span",{className:"".concat(1==t.isGood?"bg-green-600":"bg-red-900"," w-auto text-gray-50 rounded-full px-3 py-1  text-xs flex items-center mx-1"),children:1==t.isGood?"Bon":"A am\xe9liorer"}),(0,m.jsxs)("span",{className:"".concat(0==t.finalRatio?"bg-blue-500":t.finalRatio>0?"bg-green-600":"bg-red-400"," w-auto text-gray-50 rounded-full px-3 py-1  text-xs flex items-center mx-1"),children:[0==t.finalRatio?t.finalRatio:t.finalRatio>0?"+"+t.finalRatio:"-"+t.finalRatio,"%"]})]})]}),(0,m.jsxs)("div",{className:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-100",children:[(0,m.jsxs)("span",{className:"mx-1",children:["D\xe9but: ",t.startAt]}),t.endAt&&(0,m.jsxs)("span",{className:"mx-1",children:["Fin: ",t.endAt]})]})]}),(0,m.jsx)("div",{className:"border-t border-gray-300",children:(0,m.jsxs)("dl",{children:[(0,m.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,m.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-100",children:"Raisons / Confirmations"}),(0,m.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-50 sm:mt-0 sm:col-span-2",children:t.reasons})]}),(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,m.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-100",children:"R\xe9sultat"}),(0,m.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-50 sm:mt-0 sm:col-span-2",children:t.outcome})]}),(0,m.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,m.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-100",children:"Le\xe7on"}),(0,m.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-50 sm:mt-0 sm:col-span-2",children:t.lesson})]}),(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,m.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-100 mb-3",children:["Captures"," ",(0,m.jsx)("span",{className:"font-light text-xs ",children:"Cliquez sur une image pour agrandir"})]}),(0,m.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-50 sm:mt-0 sm:col-span-2 ",children:(0,m.jsx)(x.Z,{images:e.trade.tradeImages,edit:!1})})]}),(0,m.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,m.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-100",children:"Auteur"}),(0,m.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-50 sm:mt-0 sm:col-span-2",children:t.author.username})]}),g&&(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-5 flex justify-around",children:[(0,m.jsx)("div",{className:"cursor-pointer w-8 h-8 rounded-full bg-gray-800 text-white dark:bg-gray-100 dark:text-gray-800 flex items-center justify-center ",onClick:function(){h.showPopupHandler({message:"Etes-vous s\xfbr de vouloir supprimer ce trade ? la supression est d\xe9finitive",onConfirmTrue:y.bind(null,t.id),title:null})},children:(0,m.jsx)(o.b0D,{width:20,height:20})}),(0,m.jsx)("div",{className:"cursor-pointer w-8 h-8 rounded-full bg-gray-800 text-white dark:bg-gray-100 dark:text-gray-800 flex items-center justify-center mx-1",onClick:function(){a.push("/trades/edit/".concat(t.id))},children:(0,m.jsx)(o.vdY,{width:20,height:20})})]})]})})]})},f=r(7130),h=(0,l.FR)((function(){var e=(0,c.useState)(),t=e[0],r=e[1],a=(0,d.x)(),o=a.isLoading,l=a.axiosRequest,u=(0,i.useRouter)(),x=u.query.id;return(0,c.useEffect)((function(){x&&function(){var e=(0,n.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("/api/trades/".concat(x));case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.replace("/trades/my-trades");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[l,u,x]),t&&!o?(0,m.jsx)(p,{trade:t}):(0,m.jsx)(f.Z,{})}),"ROLE_USER")},463:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trades/[id]",function(){return r(5149)}])}},function(e){e.O(0,[170,689,774,888,179],(function(){return t=463,e(e.s=t);var t}));var t=e.O();_N_E=t}]);