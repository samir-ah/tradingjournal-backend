(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{7132:function(e,t,n){"use strict";n.r(t);var r=n(266),a=n(809),u=n.n(a),s=n(1163),c=n(7294),i=n(3263),o=n(723),d=n(7130),l=n(5852),p=n(9742),f=n(244),h=n(7561),v=n(5893);t.default=(0,p.FR)((function(){var e,t=(0,c.useState)(),n=t[0],a=t[1],x=(0,s.useRouter)(),w=((0,c.useContext)(p.Vo),(0,c.useState)(parseInt((null===(e=x.query.page)||void 0===e?void 0:e.toString())||"1")||1)),y=w[0],k=w[1],m=(0,c.useState)(1),_=m[0],g=m[1],j=(0,f.x)(),b=j.isLoading,E=j.axiosRequest,N=(0,c.useCallback)(function(){var e=(0,r.Z)(u().mark((function e(t){var n,r,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/trade_likes?page=".concat(t));case 3:n=e.sent,console.log(n.data["hydra:member"]),a(n.data["hydra:member"].map((function(e){return e.trade}))),"hydra:view"in n.data&&"hydra:last"in n.data["hydra:view"]?(r=n.data["hydra:view"],s=(0,h.wR)("page",r["hydra:last"]),g(parseInt(s||"1"))):g(1),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[E]);function Z(e){k(e),x.push("/trades/liked-trades?page=".concat(e))}function R(){return(R=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:e.sent,n&&n.length>1||y-1===0?N(y):y-1>0&&Z(y-1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/trades/".concat(t),{method:"delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){N(y)}),[y,N]),(0,v.jsx)("div",{className:"w-full",children:n&&n.length>0||b?(0,v.jsxs)("div",{className:"mx-auto container py-20 px-6",children:[b?(0,v.jsx)(d.Z,{}):n&&(0,v.jsx)(o.Z,{trades:n,onDeleteTrade:function(e){return R.apply(this,arguments)},onDeleteLikeTrade:function(e){a((function(t){return null===t||void 0===t?void 0:t.filter((function(t){return t.id!==e}))}))}}),(0,v.jsx)("div",{className:"flex justify-center mt-10",children:(0,v.jsx)(l.Z,{onPageChange:Z,lastPage:_,currentPage:y})})]}):(0,v.jsx)(i.Z,{children:"Aucun trade, veuillez en ajouter"})})}),"ROLE_USER")},2228:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trades/liked-trades",function(){return n(7132)}])}},function(e){e.O(0,[388,170,451,774,888,179],(function(){return t=2228,e(e.s=t);var t}));var t=e.O();_N_E=t}]);