(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{4637:function(e,t,r){"use strict";r.d(t,{Z:function(){return P}});var a=r(2809),n=r(266),s=r(809),i=r.n(s),l=r(5498),o=r(5336),d=r(7294),c=r(7393),u=r(2283),m=r(1163),x=r(244),p=r(9249),f=r(1532),h=r(5853),g=r(2942),y=r(9836),v=r(5893),b=function(e){var t=(0,d.useState)(),r=t[0],a=t[1],s=(0,d.useRef)(null),l=(0,d.useRef)(null),o=function(){var t=(0,n.Z)(i().mark((function t(r){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=r.target.value)&&(s.current&&(s.current.value=""),a(n),e.onInput(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Ajouter une capture"}),(0,v.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-400 border-dashed rounded-md",children:(0,v.jsxs)("div",{className:"flex flex-col justify-center justify-items-center space-y-1 text-center ",children:[r&&(0,v.jsxs)("div",{className:" w-60 overflow-hidden mx-auto",children:[(0,v.jsx)(y.Z,{children:(0,v.jsx)("img",{src:r,alt:"Preview",className:"rounded-md cursor-pointer","data-fancybox":"gallery","data-src":r})}),(0,v.jsx)("div",{className:"flex justify-center",children:(0,v.jsx)("span",{className:"mx-auto h-10 w-10 text-gray-400 hover:text-red-500",onClick:function(){s.current&&(s.current.value=""),l.current&&(l.current.value=""),e.onInput(null),a(null)},children:(0,v.jsx)(g.oOx,{})})})]}),!r&&(0,v.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,v.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,v.jsxs)("div",{className:"flex justify-center text-sm text-gray-600",children:[(0,v.jsxs)("label",{htmlFor:"file",className:"btn-link",children:[(0,v.jsx)("span",{children:"Choisir une image"}),(0,v.jsx)("input",{name:"file",type:"file",className:"sr-only",accept:"image/png, image/jpeg",id:e.id,ref:s,onChange:function(t){if(l.current&&(l.current.value=""),t.target.files&&1===t.target.files.length){var r=t.target.files[0],n=new FileReader;n.onload=function(){a(n.result)},n.readAsDataURL(r),e.onInput(r)}}})]}),(0,v.jsx)("p",{className:"pl-1 dark:text-gray-100",children:"Ou collez une url"})]}),(0,v.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-100",children:"PNG, JPG maximum 2 mb"}),(0,v.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,v.jsx)("span",{className:"dark:bg-gray-900 inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 dark:text-gray-200 text-sm",children:"https://"}),(0,v.jsx)("input",{type:"url",ref:l,id:"imageUrl",className:"dark:bg-gray-900 dark:text-gray-200  flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300",placeholder:"www.example.com",onChange:o})]})]})})]})},j=r(5260);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=[],O=function(e){var t,r,a,s,g,y,k,O,P,A,R=(0,d.useContext)(o.Ni),Z=(0,m.useRouter)(),C=(0,x.x)(),D=C.isLoading,_=C.axiosRequest,F=(0,d.useState)(null),L=F[0],H=F[1],M=(0,u.cI)({defaultValues:{startAt:null!==(t=e.trade)&&void 0!==t&&t.startAt?(0,f.Z)((0,h.Z)(e.trade.startAt,"dd/MM/yyyy HH:mm",new Date),"yyyy-MM-dd'T'HH:mm"):"",endAt:null!==(r=e.trade)&&void 0!==r&&r.endAt?(0,f.Z)((0,h.Z)(e.trade.endAt,"dd/MM/yyyy HH:mm",new Date),"yyyy-MM-dd'T'HH:mm"):"",reasons:(null===(a=e.trade)||void 0===a?void 0:a.reasons)||"",outcome:(null===(s=e.trade)||void 0===s?void 0:s.outcome)||"",lesson:(null===(g=e.trade)||void 0===g?void 0:g.lesson)||"",finalRatio:(null===(y=e.trade)||void 0===y?void 0:y.finalRatio)||0,isGood:(null===(k=e.trade)||void 0===k?void 0:k.isGood)||!1,isPublished:(null===(O=e.trade)||void 0===O?void 0:O.isPublished)||!0}}),I=M.register,E=M.control,S=M.handleSubmit,G=M.setValue;(0,d.useEffect)((function(){(function(){var t=(0,n.Z)(i().mark((function t(){var r,a,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_("/api/trade_instruments");case 3:n=t.sent,N=n.data["hydra:member"].map((function(e){return{value:e.id,label:e.name}})),G("tradeInstrument",null!==(r=e.trade)&&void 0!==r&&null!==(a=r.tradeInstrument)&&void 0!==a&&a.id?N[N.findIndex((function(t){var r,a;return t.value==(null===(r=e.trade)||void 0===r||null===(a=r.tradeInstrument)||void 0===a?void 0:a.id)}))]:N[0]),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[_,null===(P=e.trade)||void 0===P||null===(A=P.tradeInstrument)||void 0===A?void 0:A.id,G]);var Q=function(){var t=(0,n.Z)(i().mark((function t(r,a){var n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===a||void 0===a||a.preventDefault(),t.prev=1,t.next=4,U(w({},r),(null===(n=e.trade)||void 0===n?void 0:n.id)||null);case 4:if(s=t.sent,!L){t.next=16;break}return t.prev=6,t.next=9,q(s.data.id,L);case 9:t.sent,p.Am.success("Trade enregistr\xe9"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:Z.push("/trades/my-trades"),t.next=22;break;case 19:t.prev=19,t.t1=t.catch(1),console.log(t.t1);case 22:case"end":return t.stop()}}),t,null,[[1,19],[6,13]])})));return function(e,r){return t.apply(this,arguments)}}();function U(e,t){return V.apply(this,arguments)}function V(){return(V=(0,n.Z)(i().mark((function e(t,r){var a,n,s,l,o,d,c,u,m,x,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.startAt,n=t.endAt,s=t.reasons,l=t.outcome,o=t.lesson,d=t.finalRatio,c=t.tradeInstrument,u=t.isGood,m=t.isPublished,x=r?"/api/trades/".concat(r):"/api/trades",p=r?"put":"post",e.next=5,_(x,{data:{startAt:a?(0,f.Z)(new Date(a),"dd/MM/yyyy HH:mm"):null,endAt:n?(0,f.Z)(new Date(n),"dd/MM/yyyy HH:mm"):null,reasons:s,outcome:l,lesson:o,finalRatio:d.toString(),tradeInstrument:"api/trade_instruments/".concat(c.value),isGood:u,isPublished:m},method:p});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return B.apply(this,arguments)}function B(){return(B=(0,n.Z)(i().mark((function e(t,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("trade",t),r instanceof File?a.append("file",r):a.append("imageUrl",r),e.next=5,_("/api/trade_images",{data:a,method:"post",headers:{"Content-Type":"multipart/form-data"}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"",children:(0,v.jsx)("div",{className:"mt-5 md:mt-0",children:(0,v.jsx)("form",{onSubmit:S(Q),children:(0,v.jsxs)("div",{className:"px-4 py-5 bg-white shadow rounded-md dark:bg-gray-800 space-y-6 sm:p-6",children:[(0,v.jsx)("div",{className:"grid grid-cols-3 gap-6",children:(0,v.jsxs)("div",{className:"col-span-3 sm:col-span-2",children:[(0,v.jsx)("label",{htmlFor:"company-website",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Paire de devises"}),(0,v.jsx)(u.Qr,{name:"tradeInstrument",control:E,render:function(e){var t=e.field;return(0,v.jsx)(c.ZP,w(w({},t),{},{options:N,classNamePrefix:"react-select",className:"react-select"}))}})]})}),(0,v.jsx)("div",{className:"grid grid-cols-3 gap-6",children:(0,v.jsxs)("div",{className:"col-span-3 sm:col-span-2",children:[(0,v.jsx)("label",{htmlFor:"startAt",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Date de d\xe9but"}),(0,v.jsx)("input",w(w({type:"datetime-local"},I("startAt")),{},{id:"startAt",required:!0,className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 dark:bg-gray-900 dark:text-gray-200 rounded-md ".concat(R.theme==o.Q2.DARK&&"input-datepicker__dark")}))]})}),(0,v.jsx)("div",{className:"grid grid-cols-3 gap-6",children:(0,v.jsxs)("div",{className:"col-span-3 sm:col-span-2",children:[(0,v.jsx)("label",{htmlFor:"endAt",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Date de fin"}),(0,v.jsx)("input",w(w({type:"datetime-local",id:"endAt"},I("endAt")),{},{className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 dark:bg-gray-900 dark:text-gray-200 rounded-md ".concat(R.theme==o.Q2.DARK&&"input-datepicker__dark")}))]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"Reasons",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Confirmations"}),(0,v.jsx)("div",{className:"mt-1",children:(0,v.jsx)("textarea",w(w({id:"Reasons"},I("reasons")),{},{rows:3,className:"dark:bg-gray-900 shadow-sm dark:text-gray-200    mt-1 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"Rejet trendline...",defaultValue:""}))}),(0,v.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Courte description des confirmations qui vous ont pouss\xe9 \xe0 prendre ce trade"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"Outcome",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"R\xe9sultat"}),(0,v.jsx)("div",{className:"mt-1",children:(0,v.jsx)("textarea",w(w({id:"Outcome"},I("outcome")),{},{rows:3,className:"dark:bg-gray-900 shadow-sm dark:text-gray-200    mt-1 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"Sorti \xe0 BE...",defaultValue:""}))}),(0,v.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Quel a \xe9t\xe9 le r\xe9sultat du trade"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"Lesson",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Le\xe7on"}),(0,v.jsx)("div",{className:"mt-1",children:(0,v.jsx)("textarea",w(w({id:"Lesson"},I("lesson")),{},{rows:3,className:"dark:bg-gray-900 shadow-sm dark:text-gray-200    mt-1 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"Attendre plus de confirmations...",defaultValue:""}))}),(0,v.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Qu'est-ce que vous avez appris de ce trade"})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"Lesson",className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Statut du trade (Bon/Mauvais et Ratio (en %) de gain/perte)"}),(0,v.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("input",w(w({id:"isgood",type:"checkbox"},I("isGood")),{},{className:" h-4 w-4  text-green-500 hover:text-green-700 border-gray-300 rounded "})),(0,v.jsx)("label",{htmlFor:"isgood",className:"ml-2 block text-sm text-gray-900 dark:text-gray-50 ",children:"Bon trade"})]}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("label",{htmlFor:"isgood",className:"mr-2 block text-sm text-gray-900 dark:text-gray-50 ",children:"Ratio final (%)"}),(0,v.jsx)("input",w(w({type:"number",min:"-100",max:"100",step:"0.01"},I("finalRatio")),{},{className:"w-36 shadow-sm sm:text-sm border-gray-300 dark:bg-gray-900 dark:text-gray-200 rounded-md"}))]})]}),(0,v.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Parfois un trade peut \xeatre bon, m\xeame s'il est perdant"})]}),e.trade&&(0,v.jsx)(j.Z,{images:e.trade.tradeImages}),(0,v.jsx)(b,{id:"file",onInput:function(e){H(e)}}),(0,v.jsxs)("div",{className:" flex justify-between sm:px-6",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)("input",w(w({id:"isPublished"},I("isPublished")),{},{type:"checkbox",className:" h-4 w-4  text-green-500 hover:text-green-700 checked:text-green-700 border-gray-300 rounded "})),(0,v.jsx)("label",{htmlFor:"isPublished",className:"ml-2 block text-sm text-gray-900 dark:text-gray-50 ",children:"Visible aux autres"})]}),(0,v.jsx)(l.Z,{className:"inline-flex",isLoading:D,children:"Enregistrer"})]})]})})})})})},P=d.memo(O)},5260:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var a=r(266),n=r(809),s=r.n(n),i=r(2942),l=r(7294),o=r(5675),d=r(9836),c="https://localhost:8000/",u=r(7561),m=r(8129),x=r(244),p=r(5893),f=function(e){var t=e.images,r=e.edit,n=void 0===r||r,f=(0,x.x)(),h=(f.isLoading,f.axiosRequest),g=(0,l.useContext)(m.t),y=(0,l.useState)(t),v=y[0],b=y[1];function j(e){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:e.sent,b((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(e){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/api/trade_images/".concat(t),{method:"delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"w-full max-w-sm md:max-w-lg ",children:[n&&(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Captures"}),(0,p.jsx)("div",{className:"grid grid-rows-1 grid-flow-col gap-3 mt-1  overflow-x-auto w-full ",children:(0,p.jsx)(d.Z,{children:v.map((function(e){return(0,p.jsxs)("div",{className:" w-52  overflow-hidden ",children:[(0,p.jsx)(o.default,{loader:u.tQ,src:c+e.fileUrl,alt:"trade screenshot",width:200,height:140,layout:"responsive","data-fancybox":"gallery","data-src":c+e.fileUrl,className:"rounded-md cursor-pointer"}),n&&(0,p.jsx)("div",{className:"flex justify-center",children:(0,p.jsx)("span",{className:"mx-auto h-10 w-10 text-gray-400 hover:text-red-500 ",onClick:function(){g.showPopupHandler({message:"Etes-vous s\xfbr de vouloir supprimer cette image ? la supression est d\xe9finitive",onConfirmTrue:j.bind(null,e.id),title:null})},children:(0,p.jsx)(i.oOx,{})})})]},e.id)}))})})]})})}},5498:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(1664),n=r(9835),s=r.n(n),i=r(5893),l=function(e){return(0,i.jsx)("div",{className:"".concat(s().loader," ml-5"),children:"Loading..."})};var o=function(e){var t=e.link,r=e.className,n=e.onClick,s=e.children,o=e.isLoading;return t?(0,i.jsx)(a.default,{href:t,children:(0,i.jsx)("a",{className:"btn ".concat(r||""),children:s})}):(0,i.jsxs)("button",{className:"btn ".concat(r||""),onClick:n,disabled:o,children:[s,o?(0,i.jsx)("span",{children:(0,i.jsx)(l,{})}):""]})}},9836:function(e,t,r){"use strict";var a=r(7294),n=r(2689),s=r(5893);t.Z=function(e){var t=e.delegate||"[data-fancybox]";return(0,a.useEffect)((function(){var r=e.options||{};return n.KR.bind(t,r),function(){n.KR.destroy()}}),[t,e.options]),(0,s.jsx)(s.Fragment,{children:e.children})}},244:function(e,t,r){"use strict";r.d(t,{x:function(){return x}});var a=r(2809),n=r(266),s=r(809),i=r.n(s),l=r(7294),o=r(9669),d=r.n(o),c=r(9742);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(){var e=(0,l.useState)(!1),t=e[0],r=e[1],a=(0,l.useContext)(c.Vo),s=(0,l.useRef)([]),o=(0,l.useCallback)(function(){var e=(0,n.Z)(i().mark((function e(t){var n,l,o,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r(!0),l=new AbortController,s.current.push(l),e.prev=4,e.next=7,d()(t,m(m({},n),{},{headers:m(m({},n.headers),{},{Accept:"application/ld+json"},a.token&&{Authorization:"Bearer ".concat(a.token)}),signal:l.signal,baseURL:"https://localhost:8000"}));case 7:return o=e.sent,s.current=s.current.filter((function(e){return e!==l})),r(!1),e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(4),r(!1),e.t0.response;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[a.token]);return(0,l.useEffect)((function(){return function(){s.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:t,axiosRequest:o}}},9835:function(e){e.exports={loader:"loading-btn_loader__1Qjxv",load7:"loading-btn_load7__1_JU2"}}}]);